<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <style>
      body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
      h1, h2, h3 { color: #333; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
      th { background-color: #f4f4f4; }
      pre { background: #f4f4f4; padding: 10px; border-radius: 4px; overflow: auto; }
      code { background: #f4f4f4; padding: 2px 4px; border-radius: 3px; }
      .endpoint { font-weight: bold; color: #0066cc; }
      a { color: #0066cc; text-decoration: none; }
      a:hover { text-decoration: underline; }
    </style>
  </head>
  <body>
    <h1>T√†i li·ªáu API Zalo Server</h1>
    <h2>M·ª•c l·ª•c</h2>

    <h3>üìã APIs Qu·∫£n l√Ω T√†i kho·∫£n</h3>
    <ol>
        <li><a href="#accounts">accounts - L·∫•y danh s√°ch t√†i kho·∫£n</a></li>
        <li><a href="#accountDetails">accountDetails - Chi ti·∫øt t√†i kho·∫£n</a></li>
    </ol>

    <h3>üî• APIs N8N-Friendly (Khuy·∫øn ngh·ªã)</h3>
    <ol start="3">
        <li><a href="#findUserByAccount">findUserByAccount</a></li>
        <li><a href="#getUserInfoByAccount">getUserInfoByAccount</a></li>
        <li><a href="#sendFriendRequestByAccount">sendFriendRequestByAccount</a></li>
        <li><a href="#sendMessageByAccount">sendMessageByAccount</a></li>
        <li><a href="#createGroupByAccount">createGroupByAccount</a></li>
        <li><a href="#getGroupInfoByAccount">getGroupInfoByAccount</a></li>
        <li><a href="#addUserToGroupByAccount">addUserToGroupByAccount</a></li>
        <li><a href="#removeUserFromGroupByAccount">removeUserFromGroupByAccount</a></li>
        <li><a href="#sendImageByAccount">sendImageByAccount</a></li>
        <li><a href="#sendImageToUserByAccount">sendImageToUserByAccount</a></li>
        <li><a href="#sendImagesToUserByAccount">sendImagesToUserByAccount</a></li>
        <li><a href="#sendImageToGroupByAccount">sendImageToGroupByAccount</a></li>
        <li><a href="#sendImagesToGroupByAccount">sendImagesToGroupByAccount</a></li>
    </ol>

    <h3>‚ö†Ô∏è APIs C≈© (C·∫ßn ownId)</h3>
    <ol start="16">
        <li><a href="#findUser">findUser</a></li>
        <li><a href="#getUserInfo">getUserInfo</a></li>
        <li><a href="#sendFriendRequest">sendFriendRequest</a></li>
        <li><a href="#sendMessage">sendMessage</a></li>
        <li><a href="#createGroup">createGroup</a></li>
        <li><a href="#getGroupInfo">getGroupInfo</a></li>
        <li><a href="#addUserToGroup">addUserToGroup</a></li>
        <li><a href="#removeUserFromGroup">removeUserFromGroup</a></li>
        <li><a href="#sendImageToUser">sendImageToUser</a></li>
        <li><a href="#sendImagesToUser">sendImagesToUser</a></li>
        <li><a href="#sendImageToGroup">sendImageToGroup</a></li>
        <li><a href="#sendImagesToGroup">sendImagesToGroup</a></li>
    </ol>

    <hr/>

    <!-- ===== ACCOUNT MANAGEMENT APIs ===== -->
    <h2>üìã APIs Qu·∫£n l√Ω T√†i kho·∫£n</h2>

    <h3 id="accounts">1. accounts - L·∫•y danh s√°ch t√†i kho·∫£n</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> L·∫•y danh s√°ch t·∫•t c·∫£ t√†i kho·∫£n Zalo ƒë√£ ƒëƒÉng nh·∫≠p.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">GET /api/accounts</span></p>
    <p><strong>Parameters:</strong> Kh√¥ng c√≥</p>
    <p><strong>Response:</strong></p>
    <pre>
{
  "success": true,
  "data": [
    {
      "ownId": "123456789",
      "phoneNumber": "0901234567",
      "proxy": "http://proxy1:8080",
      "displayName": "0901234567 (123456789)",
      "isOnline": true
    }
  ],
  "total": 1
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl http://localhost:3000/api/accounts
    </pre>

    <hr/>

    <h3 id="accountDetails">2. accountDetails - Chi ti·∫øt t√†i kho·∫£n</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> L·∫•y th√¥ng tin chi ti·∫øt c·ªßa m·ªôt t√†i kho·∫£n c·ª• th·ªÉ.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">GET /api/accounts/:ownId</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>ownId</td>
          <td>string (URL param)</td>
          <td>ID t√†i kho·∫£n Zalo c·∫ßn l·∫•y th√¥ng tin.</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>Response:</strong></p>
    <pre>
{
  "success": true,
  "data": {
    "ownId": "123456789",
    "phoneNumber": "0901234567",
    "proxy": "http://proxy1:8080",
    "profile": {
      "displayName": "T√™n hi·ªÉn th·ªã",
      "avatar": "avatar_url"
    },
    "isOnline": true
  }
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl http://localhost:3000/api/accounts/123456789
    </pre>

    <hr/>

    <!-- ===== N8N-FRIENDLY APIs ===== -->
    <h2>üî• APIs N8N-Friendly (Khuy·∫øn ngh·ªã s·ª≠ d·ª•ng)</h2>
    <p><strong>L∆∞u √Ω:</strong> C√°c APIs n√†y s·ª≠ d·ª•ng <code>accountSelection</code> thay v√¨ <code>ownId</code>, gi√∫p d·ªÖ d√†ng s·ª≠ d·ª•ng t·ª´ n8n workflows.</p>

    <h3 id="findUserByAccount">3. findUserByAccount</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> T√¨m ki·∫øm ng∆∞·ªùi d√πng d·ª±a tr√™n s·ªë ƒëi·ªán tho·∫°i v·ªõi account selection.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/findUserByAccount</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>phone</td>
          <td>string</td>
          <td>S·ªë ƒëi·ªán tho·∫°i c·ªßa ng∆∞·ªùi d√πng c·∫ßn t√¨m.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>accountSelection</td>
          <td>string</td>
          <td>S·ªë ƒëi·ªán tho·∫°i ho·∫∑c ownId c·ªßa t√†i kho·∫£n ƒë·ªÉ th·ª±c hi·ªán t√¨m ki·∫øm.</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>Response:</strong></p>
    <pre>
{
  "success": true,
  "data": { /* K·∫øt qu·∫£ t√¨m ki·∫øm */ },
  "usedAccount": {
    "ownId": "123456789",
    "phoneNumber": "0901234567"
  }
}
    </pre>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "phone": "0987654321",
  "accountSelection": "0901234567"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "phone": "0987654321",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/findUserByAccount
    </pre>

    <hr/>

    <h3 id="sendMessageByAccount">4. sendMessageByAccount</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i tin nh·∫Øn v·ªõi account selection.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendMessageByAccount</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr><td>message</td><td>string</td><td>N·ªôi dung tin nh·∫Øn</td><td>C√≥</td></tr>
        <tr><td>threadId</td><td>string</td><td>ID ng∆∞·ªùi d√πng/nh√≥m</td><td>C√≥</td></tr>
        <tr><td>type</td><td>string</td><td>"user" ho·∫∑c "group"</td><td>Kh√¥ng</td></tr>
        <tr><td>accountSelection</td><td>string</td><td>S·ªë ƒëi·ªán tho·∫°i ho·∫∑c ownId</td><td>C√≥</td></tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "message": "Hello from n8n!",
  "threadId": "user_thread_id",
  "type": "user",
  "accountSelection": "0901234567"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "message": "Hello from n8n!",
  "threadId": "user_thread_id",
  "type": "user",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendMessageByAccount
    </pre>

    <hr/>

    <h3 id="sendImageByAccount">5. sendImageByAccount</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i h√¨nh ·∫£nh v·ªõi account selection.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendImageByAccount</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr><td>imagePath</td><td>string</td><td>URL h√¨nh ·∫£nh</td><td>C√≥</td></tr>
        <tr><td>threadId</td><td>string</td><td>ID ng∆∞·ªùi d√πng/nh√≥m</td><td>C√≥</td></tr>
        <tr><td>type</td><td>string</td><td>"user" ho·∫∑c "group"</td><td>Kh√¥ng</td></tr>
        <tr><td>accountSelection</td><td>string</td><td>S·ªë ƒëi·ªán tho·∫°i ho·∫∑c ownId</td><td>C√≥</td></tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "imagePath": "https://example.com/image.jpg",
  "threadId": "user_thread_id",
  "type": "user",
  "accountSelection": "0901234567"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePath": "https://example.com/image.jpg",
  "threadId": "user_thread_id",
  "type": "user",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendImageByAccount
    </pre>

    <hr/>

    <h3>üìù C√°c APIs kh√°c v·ªõi *ByAccount - V√≠ d·ª• curl</h3>

    <h4>getUserInfoByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "userId": "user_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/getUserInfoByAccount
    </pre>

    <h4>sendFriendRequestByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "userId": "user_id_here",
  "message": "Xin ch√†o, h√£y k·∫øt b·∫°n v·ªõi t√¥i!",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendFriendRequestByAccount
    </pre>

    <h4>createGroupByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "members": ["user_id_1", "user_id_2"],
  "name": "T√™n nh√≥m m·ªõi",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/createGroupByAccount
    </pre>

    <h4>getGroupInfoByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "group_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/getGroupInfoByAccount
    </pre>

    <h4>addUserToGroupByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "group_id_here",
  "memberId": "user_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/addUserToGroupByAccount
    </pre>

    <h4>removeUserFromGroupByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "group_id_here",
  "memberId": "user_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/removeUserFromGroupByAccount
    </pre>

    <h4>sendImageToUserByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePath": "https://example.com/image.jpg",
  "threadId": "user_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendImageToUserByAccount
    </pre>

    <h4>sendImagesToUserByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePaths": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"],
  "threadId": "user_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendImagesToUserByAccount
    </pre>

    <h4>sendImageToGroupByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePath": "https://example.com/image.jpg",
  "threadId": "group_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendImageToGroupByAccount
    </pre>

    <h4>sendImagesToGroupByAccount</h4>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePaths": ["https://example.com/image1.jpg", "https://example.com/image2.jpg"],
  "threadId": "group_id_here",
  "accountSelection": "0901234567"
}' http://localhost:3000/api/sendImagesToGroupByAccount
    </pre>

    <p><strong>üî• ∆Øu ƒëi·ªÉm c·ªßa APIs *ByAccount:</strong></p>
    <ul>
        <li>‚úÖ Kh√¥ng c·∫ßn nh·ªõ ownId ph·ª©c t·∫°p</li>
        <li>‚úÖ S·ª≠ d·ª•ng s·ªë ƒëi·ªán tho·∫°i d·ªÖ nh·ªõ</li>
        <li>‚úÖ Response bao g·ªìm th√¥ng tin account ƒë√£ s·ª≠ d·ª•ng</li>
        <li>‚úÖ Th√¢n thi·ªán v·ªõi n8n workflows</li>
        <li>‚úÖ H·ªó tr·ª£ dropdown selection</li>
    </ul>

    <p><strong>üìã Workflow n8n m·∫´u:</strong></p>
    <pre>
1. G·ªçi GET /api/accounts ƒë·ªÉ l·∫•y danh s√°ch t√†i kho·∫£n
2. T·∫°o dropdown t·ª´ field "displayName" ho·∫∑c "phoneNumber"
3. S·ª≠ d·ª•ng APIs *ByAccount v·ªõi accountSelection
4. Ki·ªÉm tra usedAccount trong response ƒë·ªÉ x√°c nh·∫≠n
    </pre>

    <h3>üöÄ Quick Test Commands</h3>
    <p><strong>Test c∆° b·∫£n v·ªõi curl:</strong></p>
    <pre>
# 1. L·∫•y danh s√°ch t√†i kho·∫£n
curl http://localhost:3000/api/accounts

# 2. G·ª≠i tin nh·∫Øn test
curl -X POST -H "Content-Type: application/json" -d '{
  "message": "Test message from API",
  "threadId": "YOUR_THREAD_ID",
  "accountSelection": "YOUR_PHONE_NUMBER"
}' http://localhost:3000/api/sendMessageByAccount

# 3. T√¨m user
curl -X POST -H "Content-Type: application/json" -d '{
  "phone": "TARGET_PHONE_NUMBER",
  "accountSelection": "YOUR_PHONE_NUMBER"
}' http://localhost:3000/api/findUserByAccount

# 4. G·ª≠i h√¨nh ·∫£nh
curl -X POST -H "Content-Type: application/json" -d '{
  "imagePath": "https://example.com/test-image.jpg",
  "threadId": "YOUR_THREAD_ID",
  "accountSelection": "YOUR_PHONE_NUMBER"
}' http://localhost:3000/api/sendImageByAccount
    </pre>

    <p><strong>üí° L∆∞u √Ω khi test:</strong></p>
    <ul>
        <li>Thay <code>YOUR_PHONE_NUMBER</code> b·∫±ng s·ªë ƒëi·ªán tho·∫°i t·ª´ response c·ªßa <code>/api/accounts</code></li>
        <li>Thay <code>YOUR_THREAD_ID</code> b·∫±ng ID ng∆∞·ªùi d√πng ho·∫∑c nh√≥m th·ª±c t·∫ø</li>
        <li>Thay <code>TARGET_PHONE_NUMBER</code> b·∫±ng s·ªë ƒëi·ªán tho·∫°i c·∫ßn t√¨m</li>
        <li>ƒê·∫£m b·∫£o server ƒëang ch·∫°y tr√™n port 3000</li>
        <li>Ki·ªÉm tra response c√≥ field <code>usedAccount</code> ƒë·ªÉ x√°c nh·∫≠n account ƒë√£ s·ª≠ d·ª•ng</li>
    </ul>

    <hr/>

    <!-- ===== OLD APIs ===== -->
    <h2>‚ö†Ô∏è APIs C≈© (C·∫ßn ownId)</h2>
    <p><strong>L∆∞u √Ω:</strong> C√°c APIs n√†y v·∫´n ho·∫°t ƒë·ªông nh∆∞ng khuy·∫øn ngh·ªã s·ª≠ d·ª•ng APIs *ByAccount ·ªü tr√™n.</p>

    <h3 id="findUser">16. findUser (API c≈©)</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> T√¨m ki·∫øm ng∆∞·ªùi d√πng d·ª±a tr√™n s·ªë ƒëi·ªán tho·∫°i.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/findUser</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>phone</td>
          <td>string</td>
          <td>S·ªë ƒëi·ªán tho·∫°i c·ªßa ng∆∞·ªùi d√πng.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "phone": "0123456789",
  "ownId": "0000000000000000001"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "phone": "0123456789",
  "ownId": "0000000000000000001"
}' http://localhost:3000/api/findUser
    </pre>

    <hr/>

    <h3 id="getUserInfo">2. getUserInfo</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> L·∫•y th√¥ng tin chi ti·∫øt c·ªßa m·ªôt ng∆∞·ªùi d√πng.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/getUserInfo</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>userId</td>
          <td>string</td>
          <td>ID c·ªßa ng∆∞·ªùi d√πng c·∫ßn l·∫•y th√¥ng tin.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "userId": "0000000000000000001",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "userId": "0000000000000000001",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/getUserInfo
    </pre>

    <hr/>

    <h3 id="sendFriendRequest">3. sendFriendRequest</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i l·ªùi m·ªùi k·∫øt b·∫°n ƒë·∫øn ng∆∞·ªùi d√πng.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendFriendRequest</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>userId</td>
          <td>string</td>
          <td>ID c·ªßa ng∆∞·ªùi d√πng nh·∫≠n l·ªùi m·ªùi.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "userId": "0000000000000000002",
  "ownId": "0000000000000000001"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "userId": "0000000000000000002",
  "ownId": "0000000000000000001"
}' http://localhost:3000/api/sendFriendRequest
    </pre>

    <hr/>

    <h3 id="sendMessage">4. sendMessage</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i tin nh·∫Øn vƒÉn b·∫£n (ho·∫∑c object) ƒë·∫øn ng∆∞·ªùi d√πng ho·∫∑c nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendmessage</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>message</td>
          <td>string | Object</td>
          <td>N·ªôi dung tin nh·∫Øn (c√≥ th·ªÉ l√† string ho·∫∑c object MessageContent).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>threadId</td>
          <td>string</td>
          <td>ID c·ªßa ng∆∞·ªùi d√πng/nh√≥m ƒë·ªÉ g·ª≠i tin.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>type</td>
          <td>number</td>
          <td>Lo·∫°i thread (0: User ho·∫∑c 1: Group). M·∫∑c ƒë·ªãnh l√† 0.</td>
          <td>Kh√¥ng</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "message": "Xin ch√†o",
  "threadId": "0000000000000000001",
  "type": 0,
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "message": "Xin ch√†o",
  "threadId": "0000000000000000001",
  "type": 0,
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/sendmessage
    </pre>

    <hr/>

    <h3 id="createGroup">5. createGroup</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> T·∫°o m·ªôt nh√≥m m·ªõi.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/createGroup</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>members</td>
          <td>string[]</td>
          <td>M·∫£ng ID c√°c th√†nh vi√™n (kh√¥ng bao g·ªìm b·∫£n th√¢n).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>name</td>
          <td>string</td>
          <td>T√™n c·ªßa nh√≥m.</td>
          <td>Kh√¥ng</td>
        </tr>
        <tr>
          <td>avatarPath</td>
          <td>string</td>
          <td>ƒê∆∞·ªùng d·∫´n ·∫£nh nh√≥m (n·∫øu c√≥).</td>
          <td>Kh√¥ng</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "members": ["0000000000000000002", "0000000000000000003"],
  "name": "Nh√≥m M·ªõi",
  "avatarPath": "./avatar.jpg",
  "ownId": "0000000000000000001"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "members": ["0000000000000000002", "0000000000000000003"],
  "name": "Nh√≥m M·ªõi",
  "avatarPath": "./avatar.jpg",
  "ownId": "0000000000000000001"
}' http://localhost:3000/api/createGroup
    </pre>

    <hr/>

    <h3 id="getGroupInfo">6. getGroupInfo</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> L·∫•y th√¥ng tin chi ti·∫øt c·ªßa c√°c nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/getGroupInfo</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>groupId</td>
          <td>string | string[]</td>
          <td>ID c·ªßa nh√≥m ho·∫∑c m·∫£ng c√°c ID.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "groupId": "0000000000000000000",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "0000000000000000000",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/getGroupInfo
    </pre>

    <hr/>

    <h3 id="addUserToGroup">7. addUserToGroup</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> Th√™m th√†nh vi√™n v√†o nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/addUserToGroup</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>groupId</td>
          <td>string</td>
          <td>ID c·ªßa nh√≥m.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>memberId</td>
          <td>string | string[]</td>
          <td>ID c·ªßa th√†nh vi√™n (ho·∫∑c m·∫£ng ID) c·∫ßn th√™m v√†o nh√≥m.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "groupId": "0000000000000000000",
  "memberId": ["0000000000000000001", "0000000000000000002"],
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "0000000000000000000",
  "memberId": ["0000000000000000001", "0000000000000000002"],
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/addUserToGroup
    </pre>

    <hr/>

    <h3 id="removeUserFromGroup">8. removeUserFromGroup</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> X√≥a th√†nh vi√™n kh·ªèi nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/removeUserFromGroup</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>groupId</td>
          <td>string</td>
          <td>ID c·ªßa nh√≥m.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>memberId</td>
          <td>string | string[]</td>
          <td>ID c·ªßa th√†nh vi√™n (ho·∫∑c m·∫£ng ID) c·∫ßn x√≥a kh·ªèi nh√≥m.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "groupId": "0000000000000000000",
  "memberId": ["0000000000000000001", "0000000000000000002"],
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "groupId": "0000000000000000000",
  "memberId": ["0000000000000000001", "0000000000000000002"],
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/removeUserFromGroup
    </pre>

    <hr/>

    <h3 id="sendImageToUser">9. sendImageToUser</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i m·ªôt h√¨nh ·∫£nh ƒë·∫øn ng∆∞·ªùi d√πng.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendImageToUser</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>imagePath</td>
          <td>string</td>
          <td>ƒê∆∞·ªùng d·∫´n ho·∫∑c URL ƒë·∫øn h√¨nh ·∫£nh c·∫ßn g·ª≠i (g·ª≠i trong request body d∆∞·ªõi t√™n imageUrl).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>threadId</td>
          <td>string</td>
          <td>ID c·ªßa ng∆∞·ªùi d√πng nh·∫≠n tin nh·∫Øn.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "imageUrl": "./path/to/image.jpg",
  "threadId": "0000000000000000001",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imageUrl": "./path/to/image.jpg",
  "threadId": "0000000000000000001",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/sendImageToUser
    </pre>

    <hr/>

    <h3 id="sendImagesToUser">10. sendImagesToUser</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i nhi·ªÅu h√¨nh ·∫£nh ƒë·∫øn ng∆∞·ªùi d√πng.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendImagesToUser</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>imagePaths</td>
          <td>string[]</td>
          <td>M·∫£ng ƒë∆∞·ªùng d·∫´n ho·∫∑c URL h√¨nh ·∫£nh (g·ª≠i trong request body d∆∞·ªõi t√™n imageUrls).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>threadId</td>
          <td>string</td>
          <td>ID c·ªßa ng∆∞·ªùi d√πng nh·∫≠n tin nh·∫Øn.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "imageUrls": ["./path/to/image1.jpg", "./path/to/image2.jpg"],
  "threadId": "0000000000000000001",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imageUrls": ["./path/to/image1.jpg", "./path/to/image2.jpg"],
  "threadId": "0000000000000000001",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/sendImagesToUser
    </pre>

    <hr/>

    <h3 id="sendImageToGroup">11. sendImageToGroup</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i m·ªôt h√¨nh ·∫£nh ƒë·∫øn nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendImageToGroup</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>imagePath</td>
          <td>string</td>
          <td>ƒê∆∞·ªùng d·∫´n ho·∫∑c URL ƒë·∫øn h√¨nh ·∫£nh c·∫ßn g·ª≠i (g·ª≠i trong request body d∆∞·ªõi t√™n imageUrl).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>threadId</td>
          <td>string</td>
          <td>ID c·ªßa nh√≥m nh·∫≠n tin nh·∫Øn.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "imagePath": "./path/to/group-image.jpg",
  "threadId": "0000000000000000000",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imageUrl": "./path/to/group-image.jpg",
  "threadId": "0000000000000000000",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/sendImageToGroup
    </pre>

    <hr/>

    <h3 id="sendImagesToGroup">12. sendImagesToGroup</h3>
    <p><strong>M·ª•c ƒë√≠ch:</strong> G·ª≠i nhi·ªÅu h√¨nh ·∫£nh ƒë·∫øn nh√≥m.</p>
    <p><strong>Endpoint:</strong> <span class="endpoint">POST /api/sendImagesToGroup</span></p>
    <p><strong>Parameters:</strong></p>
    <table>
        <tr><th>Field</th><th>Lo·∫°i</th><th>M√¥ t·∫£</th><th>B·∫Øt bu·ªôc</th></tr>
        <tr>
          <td>imagePaths</td>
          <td>string[]</td>
          <td>M·∫£ng ƒë∆∞·ªùng d·∫´n ho·∫∑c URL h√¨nh ·∫£nh (g·ª≠i trong request body d∆∞·ªõi t√™n imageUrls).</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>threadId</td>
          <td>string</td>
          <td>ID c·ªßa nh√≥m nh·∫≠n tin nh·∫Øn.</td>
          <td>C√≥</td>
        </tr>
        <tr>
          <td>ownId</td>
          <td>string</td>
          <td>ID t√†i kho·∫£n Zalo ƒëang ƒëƒÉng nh·∫≠p (l·∫•y t·ª´ /accounts).</td>
          <td>C√≥</td>
        </tr>
    </table>
    <p><strong>V√≠ d·ª•:</strong></p>
    <pre>
{
  "imageUrls": ["./path/to/group-image1.jpg", "./path/to/group-image2.jpg"],
  "threadId": "0000000000000000000",
  "ownId": "0000000000000000009"
}
    </pre>
    <p><strong>V√≠ d·ª• curl:</strong></p>
    <pre>
curl -X POST -H "Content-Type: application/json" -d '{
  "imageUrls": ["./path/to/group-image1.jpg", "./path/to/group-image2.jpg"],
  "threadId": "0000000000000000000",
  "ownId": "0000000000000000009"
}' http://localhost:3000/api/sendImagesToGroup
    </pre>

    <hr/>

    <footer>
      <h2>üìö T√≥m t·∫Øt</h2>
      <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <h3>üî• APIs Khuy·∫øn ngh·ªã (N8N-Friendly)</h3>
        <p>S·ª≠ d·ª•ng c√°c APIs v·ªõi <code>*ByAccount</code> ƒë·ªÉ d·ªÖ d√†ng t√≠ch h·ª£p v·ªõi n8n:</p>
        <ul>
          <li>‚úÖ <strong>GET /api/accounts</strong> - L·∫•y danh s√°ch t√†i kho·∫£n</li>
          <li>‚úÖ <strong>POST /api/*ByAccount</strong> - T·∫•t c·∫£ APIs v·ªõi accountSelection</li>
        </ul>

        <h3>‚ö° Quick Start v·ªõi n8n</h3>
        <ol>
          <li>G·ªçi <code>GET /api/accounts</code> ƒë·ªÉ l·∫•y danh s√°ch</li>
          <li>Ch·ªçn account t·ª´ <code>phoneNumber</code> ho·∫∑c <code>displayName</code></li>
          <li>S·ª≠ d·ª•ng trong <code>accountSelection</code> cho c√°c APIs kh√°c</li>
          <li>Ki·ªÉm tra <code>usedAccount</code> trong response</li>
        </ol>

        <h3>üéØ V√≠ d·ª• n8n Workflow</h3>
        <pre style="background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px;">
// Node 1: Get Accounts
GET /api/accounts

// Node 2: Send Message
POST /api/sendMessageByAccount
{
  "message": "Hello from n8n!",
  "threadId": "{{ $json.threadId }}",
  "accountSelection": "{{ $node['Get Accounts'].json.data[0].phoneNumber }}"
}
        </pre>

        <h3>üîó Li√™n k·∫øt h·ªØu √≠ch</h3>
        <ul>
          <li><a href="#accounts">üìã Qu·∫£n l√Ω t√†i kho·∫£n</a></li>
          <li><a href="#findUserByAccount">üîç APIs N8N-Friendly</a></li>
          <li><a href="#findUser">‚ö†Ô∏è APIs c≈© (legacy)</a></li>
        </ul>
      </div>

      <p style="text-align: center; margin-top: 40px; color: #666;">
        &copy; 2024 Zalo API Documentation - Updated with N8N-Friendly APIs
      </p>
    </footer>
  </body>
</html>
